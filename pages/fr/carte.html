<!DOCTYPE html>
<html lang="fr-CA">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carte Emplacements Publicitaires Affichage Dynamique | 36+ Sites - Xtranumerik</title>
<meta name="description" content="Carte interactive des emplacements publicitaires d'affichage dynamique Xtranumerik : 36+ sites stratégiques captant 62 600+ regards/semaine en Amérique du Nord. Réservez votre emplacement.">
<meta name="keywords" content="carte emplacements publicitaires, sites affichage dynamique, réservation écrans publicitaires, carte interactive publicité, Xtranumerik Amérique du Nord">
<meta name="author" content="Xtranumerik">
<meta name="robots" content="index, follow">

<!-- Hreflang -->
<link rel="alternate" hreflang="fr-CA" href="https://xtranumerik.ca/pages/fr/carte.html">
<link rel="alternate" hreflang="en-CA" href="https://xtranumerik.ca/pages/en/map.html">
<link rel="alternate" hreflang="x-default" href="https://xtranumerik.ca/pages/en/map.html">

<!-- Open Graph -->
<meta property="og:title" content="Carte Emplacements Publicitaires Affichage Dynamique | 36+ Sites - Xtranumerik">
<meta property="og:description" content="Découvrez et réservez des emplacements publicitaires d'affichage dynamique avec notre carte interactive. 36+ sites captant 62 600+ regards/semaine.">
<meta property="og:image" content="https://xtranumerik.ca/assets/images/carte-emplacements-og.jpg">
<meta property="og:url" content="https://xtranumerik.ca/pages/fr/carte.html">
<meta property="og:type" content="website">
<meta property="og:locale" content="fr_CA">

<link rel="canonical" href="https://xtranumerik.ca/pages/fr/carte.html">

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "Carte Emplacements Publicitaires Affichage Dynamique",
  "description": "Carte interactive permettant de découvrir et réserver 36+ emplacements publicitaires d'affichage dynamique captant plus de 62 600 regards par semaine en Amérique du Nord.",
  "provider": {
    "@type": "Organization",
    "name": "Xtranumerik",
    "url": "https://xtranumerik.ca",
    "logo": "https://xtranumerik.ca/assets/images/logo.png",
    "contactPoint": {
      "@type": "ContactPoint",
      "telephone": "+1-581-705-8777",
      "contactType": "customer service",
      "areaServed": "North America",
      "availableLanguage": ["French", "English"]
    }
  },
  "areaServed": {
    "@type": "Place",
    "name": "Amérique du Nord"
  },
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "Emplacements Publicitaires Premium",
    "itemListElement": [
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Emplacement Centre Commercial",
          "description": "Affichage dynamique 43 pouces dans zones à fort trafic"
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service", 
          "name": "Emplacement Restaurant",
          "description": "Écrans publicitaires dans restaurants populaires"
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Emplacement Gym/Fitness",
          "description": "Affichage ciblé dans centres de fitness"
        }
      }
    ]
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Comment réserver un emplacement publicitaire sur la carte?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Utilisez notre carte interactive pour parcourir les 36+ emplacements disponibles, ajoutez vos choix au panier, puis soumettez votre demande. Notre équipe vous contactera dans les 24h pour finaliser la réservation."
      }
    },
    {
      "@type": "Question",
      "name": "Quelle est la taille des écrans d'affichage dynamique?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Tous nos écrans d'affichage dynamique font 43 pouces et sont positionnés stratégiquement dans des zones à forte fréquentation pour maximiser la visibilité de vos campagnes publicitaires."
      }
    },
    {
      "@type": "Question",
      "name": "Combien de personnes voient les publicités sur vos écrans?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Notre réseau capte plus de 62 600 regards par semaine et 271 267 par mois avec des emplacements générant entre 400 et 26 000 passants par semaine selon la localisation, garantissant une exposition maximale à votre message publicitaire."
      }
    },
    {
      "@type": "Question",
      "name": "Dans quelles régions sont situés vos emplacements publicitaires?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Nos 36+ emplacements d'affichage dynamique sont stratégiquement répartis en Amérique du Nord, principalement dans la région de la Beauce et environs, dans des lieux à forte fréquentation comme centres commerciaux, restaurants, gyms et cliniques."
      }
    }
  ]
}
</script>

<!-- Styles -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/components.css">
<link rel="stylesheet" href="/assets/css/animations.css">
<link rel="stylesheet" href="/assets/css/responsive.css">

<!-- Header and Footer CSS -->
<link rel="stylesheet" href="/components/header-styles.css">
<link rel="stylesheet" href="/components/footer.css">

<!-- Leaflet CSS CDN -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
crossorigin=""/>

<script src="/assets/js/auto-header.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

<!-- Specific styles -->
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
body {
font-family: 'Poppins', sans-serif;
color: #190544;
background-color: #ffffff;
line-height: 1.6;
}

/* Hero Section */
.hero-section {
  background: linear-gradient(135deg, #190544 0%, #ffa91a 100%);
  padding: 8rem 1.5rem 4rem;
  color: #ffffff;
  text-align: center;
  position: relative;
}
.hero-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at 30% 70%, rgba(255,169,26,0.1), transparent);
}
.hero-section .container {
  max-width: 1200px;
  margin: 0 auto;
  position: relative;
  z-index: 1;
}
.hero-section h1 {
  font-size: 3.5rem;
  font-weight: 700;
  margin-bottom: 1.5rem;
  background: linear-gradient(135deg, #ffffff 0%, #ffa91a 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
.hero-section p {
  font-size: 1.4rem;
  margin-bottom: 2.5rem;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  opacity: 0.95;
}

/* Statistics Section */
.stats-section {
  padding: 4rem 1.5rem;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 2rem;
  max-width: 1200px;
  margin: 0 auto 4rem;
}
.stat-card {
  background: #ffffff;
  padding: 2.5rem 2rem;
  border-radius: 15px;
  text-align: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  transition: transform 0.3s ease;
  position: relative;
  overflow: hidden;
}
.stat-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: linear-gradient(135deg, #ffa91a 0%, #190544 100%);
}
.stat-card:hover {
  transform: translateY(-5px);
}
.stat-number {
  font-size: 3rem;
  font-weight: 700;
  color: #190544;
  margin-bottom: 0.5rem;
}
.stat-label {
  font-size: 1.1rem;
  color: #666;
  font-weight: 500;
}

.section {
width: 100%;
padding: 60px 20px;
}
.content-container {
max-width: 1200px;
margin: 0 auto;
}
.map-container {
height: 550px;
width: 100%;
border-radius: 12px;
overflow: hidden;
box-shadow: 0 10px 30px rgba(0,0,0,0.15);
position: relative;
z-index: 1;
}
#map-fr {
height: 100%;
width: 100%;
border-radius: 6px;
border: 1px solid #e0e0e0;
}
.leaflet-popup-content-wrapper {
background-color: #190544 !important;
color: #fff !important;
border-radius: 6px !important;
}
.leaflet-popup-tip {
background-color: #190544 !important;
}
.ad-popup {
text-align: center;
padding: 12px;
max-width: 250px;
}
.ad-popup h3 {
font-size: 1.1rem;
margin-bottom: 10px;
color: #ffa91a;
}
.ad-popup img {
max-width: 100%;
max-height: 120px;
margin-bottom: 10px;
border-radius: 4px;
}
.ad-popup button {
background-color: #ffa91a;
color: #190544;
padding: 8px 12px;
font-size: 0.9rem;
border: none;
border-radius: 4px;
cursor: pointer;
margin: 5px;
font-weight: 600;
}
.ad-popup button:hover {
background-color: #fff;
color: #190544;
}
.map-controls {
position: absolute;
top: 10px;
right: 10px;
z-index: 1000;
display: flex;
flex-direction: column;
gap: 0.5rem;
}
.map-control-btn {
background: rgba(255, 255, 255, 0.9);
border: none;
border-radius: 5px;
padding: 0.5rem;
cursor: pointer;
font-size: 0.8rem;
font-weight: 600;
transition: all 0.3s ease;
}
.map-control-btn:hover {
background: #ffa91a;
color: white;
}

/* Bouton flottant "Ajouter au panier" - Déplacé à l'extérieur */
.floating-add-to-cart {
position: absolute;
bottom: -60px;
right: 0;
z-index: 1500;
background: linear-gradient(135deg, #ffa91a 0%, #ff8c00 100%);
color: #190544;
border: none;
border-radius: 50px;
padding: 12px 24px;
font-size: 0.95rem;
font-weight: 600;
cursor: pointer;
box-shadow: 0 8px 25px rgba(255, 169, 26, 0.4);
transition: all 0.3s ease;
opacity: 0;
visibility: hidden;
transform: translateY(20px);
display: flex;
align-items: center;
gap: 8px;
}

.floating-add-to-cart.show {
opacity: 1;
visibility: visible;
transform: translateY(0);
}

.floating-add-to-cart:hover {
transform: translateY(-3px);
box-shadow: 0 12px 35px rgba(255, 169, 26, 0.6);
background: linear-gradient(135deg, #190544 0%, #2a0845 100%);
color: #ffffff;
}

.floating-add-to-cart:active {
transform: translateY(-1px);
}

.floating-add-to-cart .cart-icon {
font-size: 1.1rem;
}

/* Wrapper pour le bouton à l'extérieur de la carte */
.map-wrapper {
position: relative;
}

.location-list {
max-height: 600px;
overflow-y: auto;
padding-right: 1rem;
}
.location-item {
background: rgba(255, 255, 255, 0.95);
border: 1px solid rgba(255, 169, 26, 0.3);
border-radius: 8px;
padding: 1.2rem;
margin-bottom: 1rem;
cursor: pointer;
transition: all 0.3s ease;
}
.location-item:hover {
transform: translateY(-3px);
box-shadow: 0 5px 15px rgba(0,0,0,0.1);
background: white;
}
.location-item.selected {
border-color: #ffa91a;
background: rgba(255, 169, 26, 0.1);
box-shadow: 0 3px 10px rgba(255, 169, 26, 0.2);
}
.location-header {
display: flex;
justify-content: space-between;
align-items: start;
margin-bottom: 0.8rem;
}
.location-title {
margin-bottom: 0.3rem;
color: #190544;
font-size: 1rem;
font-weight: 600;
}
.visitors-count {
color: #ffa91a;
font-weight: 500;
font-size: 0.9rem;
margin-bottom: 0.5rem;
}
.location-description {
font-size: 0.85rem;
color: #666;
margin-bottom: 0.8rem;
line-height: 1.4;
}
.location-facing {
font-size: 0.85rem;
color: #ffa91a;
font-weight: 500;
margin-bottom: 0.5rem;
}
.location-stats {
display: flex;
gap: 0.5rem;
flex-wrap: wrap;
}
.stat-badge {
padding: 0.25rem 0.5rem;
border-radius: 4px;
font-size: 0.75rem;
font-weight: 500;
}
.traffic-badge {
background: #ffc107;
color: white;
}
.status-badge {
background: #28a745;
color: white;
}
.xtranumerik-watermark {
position: absolute;
bottom: 10px;
left: 10px;
background: rgba(25, 5, 68, 0.8);
color: white;
padding: 0.25rem 0.5rem;
border-radius: 3px;
font-size: 0.7rem;
z-index: 1000;
}
/* Système de panier flottant */
.floating-cart {
position: fixed;
bottom: 100px;
left: 50px;
width: 60px;
height: 60px;
background: #ffa91a;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
box-shadow: 0 4px 12px rgba(0,0,0,0.15);
transition: all 0.3s ease;
z-index: 999;
}
.floating-cart:hover {
transform: scale(1.1);
background: #190544;
}
.cart-icon {
color: white;
font-size: 24px;
}
.cart-notification-badge {
position: absolute;
top: -5px;
right: -5px;
background: #ff4444;
color: white;
border-radius: 50%;
width: 24px;
height: 24px;
display: flex;
align-items: center;
justify-content: center;
font-size: 12px;
font-weight: bold;
animation: pulse 2s infinite;
display: none;
}
@keyframes pulse {
0% { transform: scale(1); }
50% { transform: scale(1.1); }
100% { transform: scale(1); }
}
/* Dropdown du panier */
.cart-dropdown {
position: absolute;
bottom: 70px;
left: 0;
width: 380px;
background: white;
border-radius: 12px;
box-shadow: 0 10px 40px rgba(0,0,0,0.2);
opacity: 0;
visibility: hidden;
transform: translateY(10px);
transition: all 0.3s ease;
}
.floating-cart:hover .cart-dropdown,
.floating-cart.active .cart-dropdown {
opacity: 1;
visibility: visible;
transform: translateY(0);
}
.cart-header {
padding: 15px 20px;
background: linear-gradient(135deg, #ffa91a, #190544);
color: white;
border-radius: 12px 12px 0 0;
display: flex;
justify-content: space-between;
align-items: center;
}
.cart-body {
max-height: 400px;
overflow-y: auto;
padding: 10px;
}
.cart-item {
display: flex;
align-items: center;
padding: 12px;
margin: 5px 0;
background: #f8f9fa;
border-radius: 8px;
transition: all 0.3s ease;
}
.cart-item:hover {
background: #e9ecef;
transform: translateX(5px);
}
.cart-item-image {
width: 50px;
height: 50px;
border-radius: 4px;
margin-right: 12px;
object-fit: cover;
background: #ddd;
}
.cart-item-info {
flex: 1;
}
.cart-item-name {
font-weight: 600;
color: #190544;
margin-bottom: 4px;
}
.cart-item-details {
font-size: 12px;
color: #666;
}
.cart-item-remove {
width: 30px;
height: 30px;
border: none;
background: #ff4444;
color: white;
border-radius: 50%;
cursor: pointer;
transition: all 0.3s ease;
font-size: 18px;
font-weight: bold;
}
.cart-item-remove:hover {
background: #cc0000;
transform: rotate(90deg);
}
.cart-footer {
padding: 15px;
border-top: 1px solid #e9ecef;
display: flex;
gap: 10px;
}
.btn-reset, .btn-order {
flex: 1;
padding: 12px;
border: none;
border-radius: 8px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
}
.btn-reset {
background: #e9ecef;
color: #495057;
}
.btn-reset:hover {
background: #dee2e6;
}
.btn-order {
background: #ffa91a;
color: #190544;
}
.btn-order:hover {
background: #190544;
color: #ffffff;
transform: translateY(-2px);
}
.btn-order:disabled {
background: #ccc;
cursor: not-allowed;
transform: none;
}
.empty-cart-message {
text-align: center;
padding: 40px 20px;
color: #999;
}
.empty-cart-message svg {
font-size: 48px;
opacity: 0.3;
}
/* Modal de commande */
.order-modal {
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
z-index: 10000;
display: flex;
align-items: center;
justify-content: center;
opacity: 0;
transition: opacity 0.3s ease;
}
.order-modal.show {
opacity: 1;
}
.modal-backdrop {
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0,0,0,0.5);
}
.modal-content {
background: white;
border-radius: 12px;
padding: 30px;
max-width: 500px;
width: 90%;
max-height: 80vh;
overflow-y: auto;
position: relative;
transform: scale(0.9);
transition: transform 0.3s ease;
}
.order-modal.show .modal-content {
transform: scale(1);
}
.form-group {
margin-bottom: 20px;
}
.form-group label {
display: block;
margin-bottom: 5px;
font-weight: 600;
color: #333;
}
.form-group input,
.form-group select,
.form-group textarea {
width: 100%;
padding: 10px;
border: 1px solid #ddd;
border-radius: 6px;
font-size: 14px;
}
.modal-summary {
background: #f8f9fa;
padding: 15px;
border-radius: 8px;
margin: 20px 0;
}
.modal-summary h3 {
margin: 0 0 10px 0;
color: #190544;
}
.modal-summary ul {
margin: 0;
padding-left: 20px;
}
.modal-actions {
display: flex;
gap: 10px;
margin-top: 20px;
}
.modal-actions button {
flex: 1;
padding: 12px;
border: none;
border-radius: 8px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
}
.modal-actions button[type="button"] {
background: #e9ecef;
color: #495057;
}
.modal-actions button[type="submit"] {
background: #ffa91a;
color: #190544;
}
.modal-actions button:hover {
transform: translateY(-2px);
}
/* Animations */
@keyframes bounce {
0%, 100% { transform: scale(1); }
25% { transform: scale(1.2); }
50% { transform: scale(0.9); }
75% { transform: scale(1.1); }
}
.floating-cart.bounce {
animation: bounce 0.6s ease;
}
/* Notification toast */
.cart-notification {
position: fixed;
top: 20px;
right: 20px;
background: #28a745;
color: white;
padding: 15px 25px;
border-radius: 8px;
box-shadow: 0 4px 12px rgba(0,0,0,0.15);
transform: translateX(400px);
transition: transform 0.3s ease;
z-index: 9999;
}
.cart-notification.show {
transform: translateX(0);
}
.cart-notification.error {
background: #dc3545;
}
/* Styles spécifiques pour la section Réservation */
.process-steps {
display: flex !important;
justify-content: space-between;
gap: 2rem;
margin-top: 4rem;
flex-wrap: nowrap;
}
.step-card {
flex: 1;
text-align: center;
padding: 2rem;
background: rgba(255,255,255,0.9);
border-radius: 8px;
min-width: 0;
}
.step-number {
background: linear-gradient(135deg, #ffa91a, #190544);
color: white;
width: 60px;
height: 60px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.5rem;
font-weight: bold;
margin: 0 auto 1rem;
}
.step-title {
font-size: 1.2rem;
color: #190544;
margin-bottom: 0.5rem;
font-weight: 600;
}
.step-description {
font-size: 0.95rem;
color: #666;
line-height: 1.5;
}

/* CTA Section */
.cta-section {
  padding: 5rem 1.5rem;
  background: linear-gradient(135deg, #ffa91a 0%, #190544 100%);
  color: #ffffff;
  text-align: center;
}
.cta-section h2 {
  font-size: 2.8rem;
  font-weight: 700;
  margin-bottom: 1.5rem;
}
.cta-section p {
  font-size: 1.3rem;
  margin-bottom: 3rem;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}
.cta-buttons {
  display: flex;
  gap: 2rem;
  justify-content: center;
  flex-wrap: wrap;
}
.cta-button-light {
  background: #ffffff;
  color: #190544;
  padding: 1.2rem 2.5rem;
  border-radius: 50px;
  font-weight: 600;
  font-size: 1.1rem;
  text-decoration: none;
  transition: all 0.3s ease;
  box-shadow: 0 8px 25px rgba(255,255,255,0.3);
}
.cta-button-light:hover {
  transform: translateY(-3px);
  box-shadow: 0 15px 35px rgba(255,255,255,0.4);
  background: #f8f9fa;
}

@media (max-width: 768px) {
.section {
padding: 40px 20px;
}
.map-layout {
grid-template-columns: 1fr !important;
}
#map-fr {
height: 400px;
}
.location-list {
max-height: 400px;
}
.process-steps {
flex-direction: column;
}
.step-card {
width: 100%;
}
.floating-cart {
bottom: 80px;
left: 20px;
}
.cart-dropdown {
width: calc(100vw - 40px);
max-width: 380px;
}
.floating-add-to-cart {
bottom: -50px;
right: 0;
padding: 10px 20px;
font-size: 0.9rem;
}
.hero-section h1 { font-size: 2.5rem; }
.hero-section p { font-size: 1.2rem; }
.cta-buttons { flex-direction: column; align-items: center; }
}
@media (max-width: 992px) and (min-width: 769px) {
.step-card {
padding: 1.5rem;
}
.step-description {
font-size: 0.85rem;
}
}
</style>
</head>
<body>
<!-- Automatic header injected -->
<div id="header-container"></div>

<main>
<!-- Hero Section -->
<section class="hero-section">
  <div class="container">
    <h1>Carte Emplacements Publicitaires Affichage Dynamique</h1>
    <p>Découvrez et réservez vos emplacements publicitaires avec notre carte interactive. 36+ sites stratégiques captant plus de 62 600 regards par semaine en Amérique du Nord.</p>
  </div>
</section>

<!-- Statistics Section -->
<section class="stats-section">
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-number">36+</div>
      <div class="stat-label">Sites Disponibles</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">62.6K</div>
      <div class="stat-label">Regards/Semaine</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">271K</div>
      <div class="stat-label">Regards/Mois</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">43"</div>
      <div class="stat-label">Écrans HD</div>
    </div>
  </div>
</section>

<!-- Interactive Map Section -->
<section id="map-section" class="interactive-map-section section">
<div class="container">
<div class="map-layout" style="display: grid; grid-template-columns: 2fr 1fr; gap: 3rem; align-items: start;">
<!-- Main map -->
<div class="map-wrapper" data-animate="scale-in">
<div class="map-container">
<div id="map-fr"></div>
<div class="map-controls">
<button class="map-control-btn" onclick="centerMap()">📍 Centrer</button>
<button class="map-control-btn" onclick="showAllLocations()">🌍 Voir Tout</button>
<button class="map-control-btn" onclick="filterAvailable()">✅ Disponible</button>
</div>
<div class="xtranumerik-watermark">© Xtranumerik 2025</div>
</div>
<!-- Bouton flottant "Ajouter au panier" maintenant à l'extérieur -->
<button class="floating-add-to-cart" id="floating-add-to-cart" onclick="addSelectedToCart()">
<span class="cart-icon">🛒</span>
<span>Ajouter au panier</span>
</button>
</div>
<!-- Location list -->
<div class="locations-sidebar" data-animate="slide-up">
<h3 class="sidebar-title">Nos Emplacements</h3>
<div class="location-list" id="location-list">
<!-- Dynamically generated -->
</div>
<div class="sidebar-cta" style="margin-top: 2rem;">
<div style="text-align: center; padding: 2rem; background: rgba(255,255,255,0.9); border-radius: 8px;">
<h4>Besoin d'aide?</h4>
<p style="margin: 1rem 0;">Contactez notre équipe pour choisir l'emplacement parfait</p>
<a href="mailto:patrick@xtranumerik.ca?subject=Consultation%20emplacements%20publicitaires&body=Bonjour%20Patrick,%0D%0A%0D%0AJe%20souhaite%20une%20consultation%20pour%20choisir%20les%20meilleurs%20emplacements%20publicitaires%20d'affichage%20dynamique.%0D%0A%0D%0AInformations%20sur%20mon%20entreprise%20:%0D%0A-%20Nom%20:%20[Votre%20entreprise]%0D%0A-%20Secteur%20:%20[Votre%20secteur]%0D%0A-%20Cible%20:%20[Votre%20clientèle%20cible]%0D%0A-%20Budget%20:%20[Budget%20estimé]%0D%0A-%20Objectifs%20:%20[Vos%20objectifs]%0D%0A%0D%0AMerci,%0D%0A[Votre%20nom]"
style="background: #ffa91a; color: #190544; padding: 10px 20px; border-radius: 25px; text-decoration: none; display: inline-block; font-weight: 600;">
Parler à un Expert →
</a>
</div>
</div>
</div>
</div>
</div>
<!-- Icône flottante du panier -->
<div class="floating-cart" id="floating-cart">
<span class="cart-icon">🛒</span>
<span class="cart-notification-badge" id="cart-badge">0</span>
<div class="cart-dropdown" id="cart-dropdown">
<div class="cart-header">
<h3>Mon Panier</h3>
<span class="cart-count">0 emplacement(s)</span>
</div>
<div class="cart-body">
<div class="cart-items-list" id="cart-items">
<!-- Généré dynamiquement -->
</div>
<div class="empty-cart-message" id="empty-cart">
<div style="font-size: 48px;">🛒</div>
<p>Votre panier est vide</p>
<small>Sélectionnez des emplacements sur la carte</small>
</div>
</div>
<div class="cart-footer">
<button class="btn-reset" onclick="resetCart()">
🔄 Réinitialiser
</button>
<button class="btn-order" onclick="processOrder()" disabled>
✉️ Commander
</button>
</div>
</div>
</div>
</section>

<!-- Reservation Section -->
<section class="reservation-section section" style="background: linear-gradient(135deg, #f8f9ff 0%, #e3e9ff 100%);">
<div class="container">
<div class="section-header text-center" data-animate="fade-in">
<h2 class="section-title">Réservation Simple et Rapide</h2>
<p class="section-subtitle">Processus en 3 étapes pour réserver vos emplacements publicitaires</p>
</div>
<div class="process-steps">
<div class="step-card">
<div class="step-number">1</div>
<h3 class="step-title">Sélectionner</h3>
<p class="step-description">Parcourez la carte interactive et choisissez les emplacements qui correspondent à vos objectifs publicitaires et votre audience cible</p>
</div>
<div class="step-card">
<div class="step-number">2</div>
<h3 class="step-title">Réserver</h3>
<p class="step-description">Ajoutez vos emplacements au panier et soumettez votre demande de réservation avec vos informations de contact</p>
</div>
<div class="step-card">
<div class="step-number">3</div>
<h3 class="step-title">Diffuser</h3>
<p class="step-description">Votre campagne publicitaire d'affichage dynamique est active dans les 48 heures suivant la confirmation</p>
</div>
</div>
</div>
</section>

<!-- Final CTA -->
<section class="cta-section">
  <div class="container">
    <h2>Réservez Vos Emplacements Publicitaires</h2>
    <p>Maximisez la visibilité de votre entreprise avec nos emplacements premium d'affichage dynamique stratégiquement positionnés pour captiver votre audience.</p>
    <div class="cta-buttons">
      <a href="tel:5817058777" class="cta-button-light">Appeler: 581-705-8777</a>
      <a href="mailto:patrick@xtranumerik.ca?subject=Réservation%20emplacements%20publicitaires&body=Bonjour%20Patrick,%0D%0A%0D%0AJe%20souhaite%20réserver%20des%20emplacements%20publicitaires%20sur%20votre%20réseau%20d'affichage%20dynamique.%0D%0A%0D%0AInformations%20:%0D%0A-%20Entreprise%20:%20[Nom]%0D%0A-%20Secteur%20:%20[Secteur%20d'activité]%0D%0A-%20Emplacements%20désirés%20:%20[Voir%20carte]%0D%0A-%20Durée%20campagne%20:%20[Estimation]%0D%0A-%20Budget%20:%20[Budget%20approximatif]%0D%0A-%20Objectifs%20:%20[Vos%20objectifs]%0D%0A%0D%0AMerci%20de%20me%20contacter.%0D%0A%0D%0ACordialement,%0D%0A[Votre%20nom]" class="cta-button-light">Demande Personnalisée</a>
    </div>
  </div>
</section>
</main>

<!-- Automatic footer injected -->
<div id="footer-container"></div>

<!-- Scripts -->
<script src="/components/footer.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
crossorigin=""></script>

<script>
const adSpots = [
{ id: 1, lat: 46.4537792, lng: -71.0355562, name: "Gym Élite Coach", visitors: "1,000/sem • 4,333/mois", description: "Entrepreneurs occupés, travailleurs de nuit et passionnés de fitness avancé à Ste-Marie.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Gym+%C3%89lite+Coach+(24%2F7)/@46.4537792,-71.0355562,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/3b92e63b-d8fd-44b4-8922-c5ad17fb06ea/Gym+%C3%89lite+Coach+St-Georges.jpg?format=2500w" },
{ id: 2, lat: 46.4362786, lng: -71.0208288, name: "Restaurant Giovannina", visitors: "2,500/sem • 10,833/mois", description: "Couples en rendez-vous romantique, amateurs de cuisine italienne authentique et groupes d'affaires à Ste-Marie.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Restaurant+Giovannina+%7C+Lounge,+Pizza,+Salades+%26+P%C3%A2tes+%C3%A0+Sainte-Marie/@46.4362786,-71.0208288,17z", imageUrl: "" },
{ id: 3, lat: 46.4562891, lng: -71.0363647, name: "Galeries de la Chaudière (3 écrans)", visitors: "26,000/sem • 112,667/mois", description: "Shoppers de tous âges, adolescents en groupe et familles en sortie shopping à Ste-Marie.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Les+Galeries+de+la+Chaudi%C3%A8re/@46.4562891,-71.0363647,17z", imageUrl: "" },
{ id: 4, lat: 46.456531, lng: -71.036253, name: "Restaurant MIKES", visitors: "2,500/sem • 10,833/mois", description: "Familles multi-générationnelles, touristes et habitués du déjeuner à Ste-Marie.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Toujours+Mikes/@46.456531,-71.036253,16z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/16da176c-db54-4116-924d-eaaafbb79c2c/Restaurant+Giovannina.jpg?format=2500w" },
{ id: 5, lat: 46.3096609, lng: -70.8797443, name: "Athletik Culture GYM", visitors: "800/sem • 3,467/mois", description: "Jeunes professionnels actifs, athlètes amateurs et personnes soucieuses de leur condition physique à St-Joseph.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Athl%C3%A9tik+Culture+GYM/@46.3096609,-70.8797443,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/def3f0b8-b0da-44ae-a245-90837644710e/Athl%C3%A9tik+Culture+GYM.PNG?format=2500w" },
{ id: 6, lat: 46.3087423, lng: -70.8815006, name: "Resto l'Express", visitors: "1,000/sem • 4,333/mois", description: "Routiers professionnels, travailleurs matinaux et voyageurs en transit à St-Joseph.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Resto+l'Express/@46.3087423,-70.8815006,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/7b272211-07c7-4b35-85d4-581cb62877cd/Resto+l%27Express.jpg?format=2500w" },
{ id: 7, lat: 46.2547, lng: -70.6789, name: "Pharmacie Espace N. Dame", visitors: "1,500/sem • 6,500/mois", description: "Patients réguliers et familles cherchant des conseils santé à N. Dame des Pins.", facingTo: "[À REMPLIR]", googleMapsUrl: "", imageUrl: "" },
{ id: 8, lat: 46.2272334, lng: -70.513401, name: "Dép. Marché Abénakis", visitors: "3,500/sem • 15,167/mois", description: "Familles faisant l'épicerie hebdomadaire, personnes âgées du quartier et commerçants locaux à St-Prosper.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/March%C3%A9+Abenakis/@46.2272334,-70.513401,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/c2d6157a-e6b3-4eb1-a7c1-5edc68f57b81/March%C3%A9+Abenakis.jpg?format=2500w" },
{ id: 9, lat: 46.2106353, lng: -70.4825045, name: "Studio Santé Gym 24h (St-Prosper)", visitors: "600/sem • 2,600/mois", description: "Résidents locaux soucieux de leur santé, jeunes adultes et travailleurs de quarts à St-Prosper.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Studio+Sant%C3%A9+Gym+24h/@46.2106353,-70.4825045,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/38f326a-e630fb88-f1d-7b3-dffe0e432fc.jpg?format=2500w" },
{ id: 10, lat: 46.2135047, lng: -70.4786834, name: "Clinique & Pharmacie (2 écrans)", visitors: "2,500/sem • 10,833/mois", description: "Patients de tous âges, familles avec enfants et personnes âgées nécessitant des soins réguliers à St-Prosper.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Clinique+Medicale+St-Prosper/@46.2135047,-70.4786834,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/dde0f0ba-7446-48c5-9e9e-043c719d2d109/Clinique+M%C3%A9dicale+St-Prosper.jpg?format=2500w" },
{ id: 11, lat: 46.2140019, lng: -70.4803825, name: "Resto-Bar La Grille", visitors: "1,000/sem • 4,333/mois", description: "Amateurs de bonne bouffe, couples en sortie et groupes d'amis après le travail à St-Prosper.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/La+Grille+Resto-Pub/@46.2140019,-70.4803825,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/43af9cb5-7dbe-4cd8-be82-b32bccf66c75/La+grille.jpg?format=2500w" },
{ id: 12, lat: 46.1290591, lng: -70.367007, name: "La Bonne Fringale", visitors: "1,000/sem • 4,333/mois", description: "Professionnels en lunch d'affaires, gastronomes et couples célébrant des occasions spéciales à St-Zacharie.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Restaurant+%C3%A0+la+Bonne+Fringale/@46.1290591,-70.367007,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/9d02dec0-44be-47cf-84bb-912c5bf67df2/Restaurant+%C3%A0+la+Bonne+Fringale.jpg?format=2500w" },
{ id: 13, lat: 46.1470763, lng: -70.9063196, name: "Pizzéria Jippy", visitors: "1,200/sem • 5,200/mois", description: "Étudiants, jeunes familles pressées et amateurs de pizza artisanale à St-Victor.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Pizzeria+Jippy/@46.1470763,-70.9063196,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/0bd885fb-22cc-4a8b-946c-d657b4f6e72d/Pizza+Jippy.jpg?format=2500w" },
{ id: 14, lat: 45.871817, lng: -70.9853831, name: "Bistro Bonichoix", visitors: "900/sem • 3,900/mois", description: "Familles du quartier, personnes âgées et clients réguliers cherchant des produits frais à Courcelle.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/March%C3%A9+Bonichoix+-+Alimentation+Elite+2005+inc./@45.871817,-70.9853831,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/edf0f4da-ad29-44ed-9c91-6ac81be443ec/Screenshot+2025-06-03+171724.png?format=2500w" },
{ id: 15, lat: 46.1044769, lng: -71.2817687, name: "Restaurant le Truc", visitors: "1,000/sem • 4,333/mois", description: "Camionneurs, voyageurs pressés et familles en road trip à Thetford.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Resto-Truc/@46.1044769,-71.2817687,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/6bec7d7b-cf26-40c7-8f0f-eace81361594/Resto+truc.jpg?format=2500w" },
{ id: 16, lat: 46.1194527, lng: -70.6706433, name: "Salon Quilles Plus (2 écrans)", visitors: "800/sem • 3,467/mois", description: "Groupes d'amis, familles en sortie et ligues de quilles organisées à St-Georges.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Salon+Quilles+Chez+Plus/@46.1194527,-70.6706433,17z", imageUrl: "" },
{ id: 17, lat: 46.0953658, lng: -70.6430308, name: "Fromagerie la Pépite d'Or", visitors: "1,000/sem • 4,333/mois", description: "Touristes gourmands, amateurs de fromages fins et clients cherchant des produits locaux à St-Georges.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Fromagerie+la+P%C3%A9pite+d'Or+Inc./@46.0953658,-70.6430308,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/d230aa6c-937a-4da5-a023-0066e482472f/Fromagerie+la+P%C3%A9pite+d%27Or.jpg?format=2500w" },
{ id: 18, lat: 46.1142172, lng: -70.6749684, name: "Restaurant le Sablonet", visitors: "1,000/sem • 4,333/mois", description: "Couples aisés, groupes d'affaires et amateurs de gastronomie locale à St-Georges.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Restaurant+Le+Sablonet/@46.1142172,-70.6749684,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/9dacd26d-f698-4f8f-81a9-ea19c556ecd9/Restaurant+Le+Sablonet.jpg?format=2500w" },
{ id: 19, lat: 46.0964416, lng: -70.6463177, name: "Studio Santé Gym 24h (2 écrans)", visitors: "1,200/sem • 5,200/mois", description: "Personnes âgées actives, débutants en fitness et personnes en réadaptation physique à St-Georges.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Studio+Sant%C3%A9+Gym+24h/@46.0964416,-70.6463177,17z", imageUrl: "" },
{ id: 20, lat: 46.1168869, lng: -70.6796526, name: "Baril Grill", visitors: "2,500/sem • 10,833/mois", description: "Amateurs de viande de qualité, groupes d'affaires et couples célébrant des occasions spéciales à St-Georges.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Restaurant+Baril+Grill/@46.1168869,-70.6796526,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/6f80aaba-f2d4-4ab4-b32b-0540a3301c0d/Baril+Grill.jpg?format=2500w" },
{ id: 21, lat: 46.1090561, lng: -70.655366, name: "Boston Pizza", visitors: "2,800/sem • 12,133/mois", description: "Familles nombreuses, groupes d'adolescents et amateurs de sports en groupe à St-Georges.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Boston+Pizza/@46.1090561,-70.655366,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/7931ff7c-090d-49ac-9b2e-71cbe9312a67/Boston+pizza.png?format=2500w" },
{ id: 22, lat: 46.0845, lng: -70.6523, name: "Centre de recherche d'emploi", visitors: "200/sem • 867/mois", description: "Demandeurs d'emploi, professionnels en transition et jeunes diplômés à St-Georges.", facingTo: "[À REMPLIR]", googleMapsUrl: "", imageUrl: "" },
{ id: 23, lat: 46.1504729, lng: -70.7762262, name: "NRJ Spa Nordique", visitors: "700/sem • 3,033/mois", description: "Professionnels aisés, couples en escapade romantique et amateurs de bien-être et détente à St-Alfred.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/NRJ+Spa+Nordique/@46.1504729,-70.7762262,17z", imageUrl: "" },
{ id: 24, lat: 46.0114203, lng: -70.6178217, name: "Resto-Parc 2000", visitors: "400/sem • 1,733/mois", description: "Familles en sortie dominicale, organisateurs d'événements et amateurs de vues panoramiques à St-René.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Resto+Parc+2000+Inc./@46.0114203,-70.6178217,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/ac18f51a-35ee-4315-a920-276f2c0ee0a6/Resto+Parc+2000+Inc.jpg?format=2500w" },
{ id: 25, lat: 45.8576338, lng: -70.6342738, name: "Rotisserie Mom's", visitors: "800/sem • 3,467/mois", description: "Jeunes adultes 25-40 ans, couples sans enfants et amateurs de soirées thématiques à St-Gédéon.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Resto+mom's/@45.8576338,-70.6342738,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/cf526810-3dc1-4873-9e93-d4ec9d72fa4e/Resto+MOM+PUB.png?format=2500w" },
{ id: 26, lat: 45.9594959, lng: -70.6788479, name: "Casse-Croûte Chez Marie", visitors: "1,000/sem • 4,333/mois", description: "Travailleurs de la construction, habitués locaux et nostalgiques de la cuisine québécoise traditionnelle à St-Martin.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Casse-Cro%C3%BBte+Chez+Marie/@45.9594959,-70.6788479,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/d5e1c4d2-4a70-4434-bb87-07b90eaf6016/Chez+Marie.PNG.jpg?format=2500w" },
{ id: 27, lat: 46.0699824, lng: -70.7929689, name: "Resto Rick's", visitors: "700/sem • 3,033/mois", description: "Familles locales, habitués du quartier et amateurs de cuisine réconfortante à St-Benoit.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Resto+Rick's/@46.0699824,-70.7929689,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/0b540555-29dd-48a6-8178-47c35f966940/Resto+VanLou.jpg?format=2500w" },
{ id: 28, lat: 45.9607918, lng: -70.8254776, name: "Place St-Honoré", visitors: "1,500/sem • 6,500/mois", description: "Résidents locaux, visiteurs des services municipaux et commerçants du centre-ville de St-Honoré.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/477+Rue+Principale,+Saint-Honor%C3%A9-de-Shenley,+QC+B4+7XG/@45.9607918,-70.8254776,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/b5a56569-81bc-4d87-8d68-a6a1b88ae618/Saint-Honor%C3%A9-de-Shenley.jpg?format=2500w" },
{ id: 29, lat: 45.9616571, lng: -70.9373016, name: "Restaurant le Royal", visitors: "1,000/sem • 4,333/mois", description: "Familles avec enfants, professionnels en pause déjeuner et groupes d'amis recherchant une ambiance conviviale à La Guadeloupe.", facingTo: "[À REMPLIR]", googleMapsUrl: "https://www.google.com/maps/place/Restaurant+Bar+Royal/@45.9616571,-70.9373016,17z", imageUrl: "https://images.squarespace-cdn.com/content/v1/657625271114fa52dac0d038/6aef6a49-2d4d-44da-a813-ab9017c4cde9/%C3%89cran+Royal.png?format=2500w" }
];

// État du panier
let cartItems = [];
let isCartOpen = false;
let mapFr;
let markers = [];
let selectedLocationId = null;

// Initialisation
document.addEventListener('DOMContentLoaded', function() {
console.log('Chargement de la page...');
if (typeof L !== 'undefined') {
initializeMapAndFeatures();
} else {
console.log('En attente du chargement de Leaflet...');
setTimeout(initializeMapAndFeatures, 500);
}
});

function initializeMapAndFeatures() {
try {
mapFr = initializeMap('map-fr', 'fr');
if (mapFr) {
initializeCart();
setupCartEvents();
loadCartFromStorage();
generateLocationList();
}
window.addEventListener('resize', () => {
if (mapFr) {
mapFr.invalidateSize();
}
});
} catch (e) {
console.error('Erreur lors de l\'initialisation:', e);
document.getElementById('map-fr').innerHTML = '<p class="error-message">Erreur de chargement de la carte.</p>';
}
}

function initializeMap(mapId, lang) {
try {
console.log('Initialisation de la carte...');
if (typeof L === 'undefined') {
throw new Error('Leaflet non chargé');
}
const map = L.map(mapId).setView([46.0, -70.7], 8);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
maxZoom: 19
}).addTo(map);
markers = [];
adSpots.forEach(spot => {
const marker = L.marker([spot.lat, spot.lng]).addTo(map);
marker.bindPopup(createPopupContent(spot));
marker.on('click', () => {
selectedLocationId = spot.id;
highlightLocationInList(spot.id);
showFloatingAddButton(spot);
});
markers.push({ marker, location: spot });
});
setTimeout(() => {
map.invalidateSize();
}, 100);
console.log('Carte initialisée avec succès');
return map;
} catch (e) {
console.error('Erreur d\'initialisation de la carte:', e);
document.getElementById(mapId).innerHTML = '<p class="error-message">Erreur de chargement de la carte.</p>';
return null;
}
}

function createPopupContent(spot) {
const isInCart = cartItems.find(item => item.id === spot.id);
const buttonText = isInCart ? 'Retirer du panier' : 'Ajouter au panier';
const buttonClass = isInCart ? 'btn-remove' : 'btn-add';
const imageHtml = spot.imageUrl ? `<img src="${spot.imageUrl}" alt="${spot.name}" style="max-width:100%;" onerror="this.style.display='none';" />` : '';
return `
<div class="ad-popup" data-id="${spot.id}">
<h3>${spot.name}</h3>
${imageHtml}
<p style="margin: 10px 0; font-size: 0.85rem;">Format: 43 pouces HD</p>
<p style="margin: 10px 0; font-size: 0.85rem; color: #ffa91a;">Faisant face à: ${spot.facingTo}</p>
<button class="${buttonClass}" onclick="toggleCartItem(${spot.id})">${isInCart ? '🗑️' : '🛒'} ${buttonText}</button>
<button onclick="openGoogleMaps('${spot.googleMapsUrl}')" ${!spot.googleMapsUrl ? 'disabled' : ''}>Voir sur Google Maps</button>
</div>
`;
}

function updateMarkers() {
try {
markers.forEach(m => {
const spot = m.location;
m.marker.bindPopup(createPopupContent(spot));
});
} catch (e) {
console.error('Erreur mise à jour des marqueurs:', e);
}
}

function toggleCartItem(spotId) {
const spot = adSpots.find(s => s.id === spotId);
const isInCart = cartItems.find(item => item.id === spotId);
if (isInCart) {
removeFromCart(spotId);
} else {
addToCart(spot);
}
if (markers.find(m => m.location.id === spotId)) {
updateMarkers();
}
updateFloatingAddButton();
}

function openGoogleMaps(url) {
if (url) {
window.open(url, '_blank');
}
}

// Nouvelle fonction pour afficher le bouton flottant "Ajouter au panier"
function showFloatingAddButton(spot) {
const floatingBtn = document.getElementById('floating-add-to-cart');
const isInCart = cartItems.find(item => item.id === spot.id);

// Mettre à jour le texte du bouton selon l'état
const buttonText = isInCart ? 'Retirer du panier' : 'Ajouter au panier';
const icon = isInCart ? '🗑️' : '🛒';
floatingBtn.innerHTML = `<span class="cart-icon">${icon}</span><span>${buttonText}</span>`;
floatingBtn.classList.add('show');
}

function hideFloatingAddButton() {
const floatingBtn = document.getElementById('floating-add-to-cart');
floatingBtn.classList.remove('show');
}

function updateFloatingAddButton() {
if (selectedLocationId) {
const spot = adSpots.find(s => s.id === selectedLocationId);
if (spot) {
showFloatingAddButton(spot);
}
}
}

function addSelectedToCart() {
if (selectedLocationId) {
toggleCartItem(selectedLocationId);
}
}

function initializeCart() {
updateCartUI();
}

function setupCartEvents() {
const cartElement = document.getElementById('floating-cart');
cartElement.addEventListener('click', function(e) {
e.stopPropagation();
toggleCart();
});
cartElement.addEventListener('mouseenter', function() {
openCart();
});
cartElement.addEventListener('mouseleave', function() {
setTimeout(() => {
if (!isCartOpen) {
closeCart();
}
}, 300);
});
document.addEventListener('click', function(e) {
if (!e.target.closest('#floating-cart')) {
closeCart();
}
});
}

function toggleCart() {
isCartOpen = !isCartOpen;
const cart = document.getElementById('floating-cart');
cart.classList.toggle('active', isCartOpen);
}

function openCart() {
const cart = document.getElementById('floating-cart');
cart.classList.add('active');
}

function closeCart() {
isCartOpen = false;
const cart = document.getElementById('floating-cart');
cart.classList.remove('active');
}

function addToCart(spot) {
if (cartItems.find(item => item.id === spot.id)) {
showNotification('Cet emplacement est déjà dans votre panier', 'error');
return;
}
cartItems.push({
id: spot.id,
name: spot.name,
visitors: spot.visitors,
imageUrl: spot.imageUrl || '/assets/images/placeholder.jpg',
googleMapsUrl: spot.googleMapsUrl,
description: spot.description
});
updateCartUI();
saveCartToStorage();
showNotification('✓ Ajouté au panier');
animateCartIcon();
}

function removeFromCart(itemId) {
cartItems = cartItems.filter(item => item.id !== itemId);
updateCartUI();
saveCartToStorage();
updateMarkers();
}

function updateCartUI() {
const badge = document.getElementById('cart-badge');
const cartList = document.getElementById('cart-items');
const emptyMessage = document.getElementById('empty-cart');
const orderBtn = document.querySelector('.btn-order');
badge.textContent = cartItems.length;
badge.style.display = cartItems.length > 0 ? 'flex' : 'none';
if (cartItems.length === 0) {
cartList.style.display = 'none';
emptyMessage.style.display = 'block';
orderBtn.disabled = true;
} else {
cartList.style.display = 'block';
emptyMessage.style.display = 'none';
orderBtn.disabled = false;
cartList.innerHTML = cartItems.map(item => `
<div class="cart-item" data-id="${item.id}">
<div class="cart-item-image" style="background-image: url(${item.imageUrl})"></div>
<div class="cart-item-info">
<div class="cart-item-name">${item.name}</div>
<div class="cart-item-details">👥 ${item.visitors}</div>
</div>
<button class="cart-item-remove" onclick="removeFromCart(${item.id})">×</button>
</div>
`).join('');
}
document.querySelector('.cart-count').textContent = `${cartItems.length} emplacement${cartItems.length > 1 ? 's' : ''}`;
}

function resetCart() {
if (cartItems.length === 0) return;
if (confirm('Voulez-vous vraiment vider votre panier ?')) {
cartItems.forEach(item => {
if (markers.find(m => m.location.id === item.id)) {
updateMarkers();
}
});
cartItems = [];
updateCartUI();
saveCartToStorage();
showNotification('Panier réinitialisé');
updateFloatingAddButton();
}
}

function processOrder() {
if (cartItems.length === 0) return;
openOrderModal();
}

function openOrderModal() {
const modal = createOrderModal();
document.body.appendChild(modal);
setTimeout(() => {
modal.classList.add('show');
}, 10);
}

function createOrderModal() {
const modal = document.createElement('div');
modal.className = 'order-modal';
modal.innerHTML = `
<div class="modal-backdrop" onclick="closeModal()"></div>
<div class="modal-content">
<h2>Finaliser votre demande de réservation</h2>
<form id="order-form" onsubmit="submitOrder(event)">
<div class="form-group">
<label>Nom de l'entreprise *</label>
<input type="text" name="company" required>
</div>
<div class="form-group">
<label>Nom du contact *</label>
<input type="text" name="contact" required>
</div>
<div class="form-group">
<label>Email *</label>
<input type="email" name="email" required>
</div>
<div class="form-group">
<label>Téléphone *</label>
<input type="tel" name="phone" required>
</div>
<div class="form-group">
<label>Durée de campagne</label>
<select name="duration">
<option>1 mois</option>
<option>3 mois</option>
<option>6 mois</option>
<option>12 mois</option>
<option>Autre</option>
</select>
</div>
<div class="form-group">
<label>Message (optionnel)</label>
<textarea name="message" rows="3"></textarea>
</div>
<div class="modal-summary">
<h3>Récapitulatif : ${cartItems.length} emplacement(s) sélectionné(s)</h3>
<ul>
${cartItems.map(item => `<li>${item.name} (${item.visitors})</li>`).join('')}
</ul>
</div>
<div class="modal-actions">
<button type="button" onclick="closeModal()">Annuler</button>
<button type="submit">Envoyer la demande</button>
</div>
</form>
</div>
`;
return modal;
}

function closeModal() {
const modal = document.querySelector('.order-modal');
if (modal) {
modal.classList.remove('show');
setTimeout(() => {
modal.remove();
}, 300);
}
}

function submitOrder(event) {
event.preventDefault();
const formData = new FormData(event.target);
const orderData = Object.fromEntries(formData);
const emailBody = buildEmailBody(orderData);
window.location.href = `mailto:patrick@xtranumerik.ca?subject=Demande réservation emplacements publicitaires - ${cartItems.length} sites&body=${encodeURIComponent(emailBody)}`;
setTimeout(() => {
resetCart();
closeModal();
showSuccessMessage();
}, 1000);
}

function buildEmailBody(orderData) {
let body = `Bonjour Patrick,\n\n`;
body += `Je souhaite réserver des emplacements publicitaires d'affichage dynamique sur votre réseau.\n\n`;
body += `INFORMATIONS DE CONTACT:\n`;
body += `- Entreprise: ${orderData.company}\n`;
body += `- Contact: ${orderData.contact}\n`;
body += `- Email: ${orderData.email}\n`;
body += `- Téléphone: ${orderData.phone}\n`;
body += `- Durée souhaitée: ${orderData.duration}\n\n`;
body += `EMPLACEMENTS SÉLECTIONNÉS (${cartItems.length}):\n`;
cartItems.forEach(item => {
body += `- ${item.name} (${item.visitors})\n`;
});
if (orderData.message) {
body += `\nMESSAGE ADDITIONNEL:\n${orderData.message}\n`;
}
body += `\nMerci de me contacter pour finaliser cette réservation et discuter des tarifs.\n\nCordialement`;
return body;
}

function animateCartIcon() {
const cart = document.getElementById('floating-cart');
cart.classList.add('bounce');
setTimeout(() => {
cart.classList.remove('bounce');
}, 600);
}

function showNotification(message, type = 'success') {
const notification = document.createElement('div');
notification.className = `cart-notification ${type}`;
notification.textContent = message;
document.body.appendChild(notification);
setTimeout(() => {
notification.classList.add('show');
}, 10);
setTimeout(() => {
notification.remove();
}, 3000);
}

function showSuccessMessage() {
showNotification('Votre demande a été envoyée avec succès!');
}

function saveCartToStorage() {
sessionStorage.setItem('xtranumerik_cart', JSON.stringify(cartItems));
}

function loadCartFromStorage() {
const saved = sessionStorage.getItem('xtranumerik_cart');
if (saved) {
cartItems = JSON.parse(saved);
updateCartUI();
updateMarkers();
}
}

function generateLocationList() {
const locationList = document.getElementById('location-list');
if (!locationList) return;
adSpots.forEach(spot => {
const locationItem = document.createElement('div');
locationItem.className = 'location-item';
locationItem.id = `location-${spot.id}`;
locationItem.innerHTML = `
<div class="location-header">
<div style="flex: 1;">
<h4 class="location-title">${spot.name}</h4>
<div class="visitors-count">👥 ${spot.visitors}</div>
</div>
<div>📍</div>
</div>
<p class="location-description">${spot.description}</p>
<p class="location-facing">Faisant face à: ${spot.facingTo}</p>
<div class="location-stats">
<span class="stat-badge traffic-badge">Format: 43" HD</span>
<span class="stat-badge status-badge">Disponible</span>
</div>
`;
locationItem.addEventListener('click', () => {
if (mapFr) {
selectedLocationId = spot.id;
mapFr.setView([spot.lat, spot.lng], 15);
const marker = markers.find(m => m.location.id === spot.id);
if (marker) {
marker.marker.openPopup();
}
highlightLocationInList(spot.id);
showFloatingAddButton(spot);
}
});
locationList.appendChild(locationItem);
});
}

function highlightLocationInList(locationId) {
document.querySelectorAll('.location-item').forEach(item => {
item.classList.remove('selected');
});
const locationElement = document.getElementById(`location-${locationId}`);
if (locationElement) {
locationElement.classList.add('selected');
locationElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}
}

function centerMap() {
if (mapFr) {
mapFr.setView([46.0, -70.7], 8);
selectedLocationId = null;
hideFloatingAddButton();
}
}

function showAllLocations() {
if (mapFr && markers.length > 0) {
const group = L.featureGroup(markers.map(m => m.marker));
mapFr.fitBounds(group.getBounds().pad(0.05));
selectedLocationId = null;
hideFloatingAddButton();
}
}

function filterAvailable() {
showAllLocations();
}

// Scroll animations
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.style.opacity = '1';
      entry.target.style.transform = 'translateY(0)';
    }
  });
}, observerOptions);

// Observe elements for animation
document.querySelectorAll('.stat-card').forEach(el => {
  el.style.opacity = '0';
  el.style.transform = 'translateY(20px)';
  el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
  observer.observe(el);
});
</script>
</body>
</html>